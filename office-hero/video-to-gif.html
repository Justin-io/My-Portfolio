<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video to GIF | Office Hero</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <div class="back-nav">
            <a href="../index.html#utilities" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Tools
            </a>
        </div>

        <header>
            <div class="icon-box" style="margin: 0 auto 1.5rem auto;">
                <i class="fas fa-video"></i>
            </div>
            <h1 class="brand">Video to GIF</h1>
            <p class="tagline">Turn your favorite moments into shareable GIFs instantly.</p>
        </header>

        <div class="tool-interface">
            <div class="drop-zone" id="drop-zone">
                <i class="fas fa-film" style="font-size: 3rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                <p id="file-label">Upload MP4 Video</p>
                <input type="file" id="file-input" accept="video/mp4" style="display: none;">
            </div>

            <div id="video-editor" style="display: none; text-align: left;">
                <video id="video-preview" controls
                    style="width: 100%; border-radius: 12px; margin-bottom: 2rem; border: 1px solid var(--glass-border);"></video>

                <div class="control-panel"
                    style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
                    <div style="display: flex; gap: 20px; margin-bottom: 1rem; color: var(--text-secondary);">
                        <div style="flex: 1;">
                            <label>Start Time (s)</label>
                            <input type="number" id="start-time" value="0" min="0" step="0.1"
                                style="width: 100%; padding: 0.5rem; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                        </div>
                        <div style="flex: 1;">
                            <label>Duration (s)</label>
                            <input type="number" id="duration" value="3" min="1" max="10"
                                style="width: 100%; padding: 0.5rem; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                        </div>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button id="convert-btn" class="btn-action">Create GIF</button>
                </div>
            </div>

            <div class="result-area" id="result-area">
                <div id="loading" style="display: none;">
                    <i class="fas fa-cog fa-spin" style="font-size: 2rem; color: var(--accent);"></i>
                    <p style="margin-top: 1rem;">Rendering GIF frames...</p>
                    <div class="progress-container" style="display: block;">
                        <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
                    </div>
                </div>
                <div id="success" style="display: none;">
                    <h3>GIF Ready!</h3>
                    <img id="gif-output" style="max-width: 100%; border-radius: 8px; margin: 1rem 0;">
                    <br>
                    <button class="btn-action btn-sm" id="download-btn">Download GIF</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const videoEditor = document.getElementById('video-editor');
        const videoPreview = document.getElementById('video-preview');
        const convertBtn = document.getElementById('convert-btn');
        const resultArea = document.getElementById('result-area');
        const loading = document.getElementById('loading');
        const success = document.getElementById('success');
        const progressFill = document.getElementById('progress-fill');

        dropZone.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', (e) => handleFile(e.target.files[0]));

        function handleFile(file) {
            if (!file || file.type !== 'video/mp4') return;

            const url = URL.createObjectURL(file);
            videoPreview.src = url;

            dropZone.style.display = 'none';
            videoEditor.style.display = 'block';
        }

        convertBtn.addEventListener('click', () => {
            convertBtn.disabled = true;
            resultArea.style.display = 'block';
            resultArea.classList.add('active');
            loading.style.display = 'block';
            success.style.display = 'none';

            // Simulate Rendering
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressFill.style.width = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    finishConversion();
                }
            }, 150);
        });

        function finishConversion() {
            loading.style.display = 'none';
            success.style.display = 'block';

            // For Demo, just showing a placeholder GIF logic. 
            // In a real app we'd use ffmpeg.wasm here.
            document.getElementById('gif-output').src = "https://media.giphy.com/media/l0HlHJGHe3yAMhdQY/giphy.gif"; // Placeholder success
            document.getElementById('download-btn').onclick = () => alert('This is a demo. Real client-side encoding requires heavy WASM libraries (ffmpeg.wasm) which are too large for this static portfolio embed.');

            convertBtn.innerText = "Convert Another";
            convertBtn.disabled = false;
        }
    </script>
</body>

</html>