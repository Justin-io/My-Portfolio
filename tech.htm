<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechFest 2026 Organizer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4F46E5;
            --primary-dark: #4338CA;
            --secondary: #7C3AED;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --dark: #1F2937;
            --light: #F9FAFB;
            --border: #E5E7EB;
            --text: #374151;
            --text-light: #6B7280;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --header-height: 70px;
            --sidebar-width: 280px;
            --sidebar-collapsed-width: 0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100%;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light);
            color: var(--text);
            line-height: 1.6;
            height: 100%;
            overflow: hidden;
            font-size: 14px;
        }

        /* App Container */
        .app-container {
            display: flex;
            height: 100vh;
            max-height: 100vh;
            width: 100vw;
            max-width: 100vw;
            overflow: hidden;
            position: relative;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            min-width: var(--sidebar-width);
            max-width: var(--sidebar-width);
            height: 100vh;
            max-height: 100vh;
            background-color: var(--dark);
            color: white;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
            transition: transform 0.3s ease, width 0.3s ease;
            position: relative;
            z-index: 100;
            flex-shrink: 0;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header i {
            font-size: 24px;
            margin-right: 10px;
            color: var(--primary);
            flex-shrink: 0;
        }

        .sidebar-header h1 {
            font-size: 20px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(79, 70, 229, 0.2);
            color: white;
        }

        .nav-link i {
            margin-right: 10px;
            width: 20px;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
            min-width: 0;
        }

        /* Header */
        .header {
            background-color: white;
            padding: 15px 25px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            height: var(--header-height);
            min-height: var(--header-height);
            max-height: var(--header-height);
            flex-shrink: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 0;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 20px;
            margin-right: 15px;
            cursor: pointer;
            color: var(--text);
            flex-shrink: 0;
        }

        .search-bar {
            position: relative;
            width: 100%;
            max-width: 400px;
            min-width: 200px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }

        .notification-btn, .user-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: var(--text);
            cursor: pointer;
            position: relative;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 10px;
            height: 10px;
            background-color: var(--danger);
            border-radius: 50%;
        }

        .user-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px 10px;
            border-radius: 8px;
            background-color: var(--light);
        }

        .user-btn img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        /* Dashboard */
        .dashboard {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            overflow-x: hidden;
            height: calc(100vh - var(--header-height));
            max-height: calc(100vh - var(--header-height));
            width: 100%;
        }

        .dashboard::-webkit-scrollbar {
            width: 8px;
        }

        .dashboard::-webkit-scrollbar-track {
            background: var(--light);
        }

        .dashboard::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        .dashboard::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }

        .dashboard-header {
            margin-bottom: 25px;
        }

        .dashboard-header h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .dashboard-header p {
            color: var(--text-light);
        }

        /* Responsive Grid Layout */
        .widgets-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            width: 100%;
        }

        .widgets-container.single-column {
            grid-template-columns: 1fr;
        }

        .widgets-container.two-columns {
            grid-template-columns: repeat(2, 1fr);
        }

        .widgets-container.three-columns {
            grid-template-columns: repeat(3, 1fr);
        }

        /* Widget */
        .widget {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }

        .widget:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .widget-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .widget-title i {
            margin-right: 8px;
            color: var(--primary);
            flex-shrink: 0;
        }

        .widget-action {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 16px;
            flex-shrink: 0;
        }

        .widget-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            max-height: 400px;
            min-height: 0;
        }

        .widget-content::-webkit-scrollbar {
            width: 6px;
        }

        .widget-content::-webkit-scrollbar-track {
            background: var(--light);
        }

        .widget-content::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        /* Calendar Widget */
        .calendar-widget {
            grid-column: span 2;
            min-height: 450px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav button {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 16px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            width: 100%;
            overflow: hidden;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: var(--text-light);
            padding: 10px 0;
            font-size: 14px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            position: relative;
            min-height: 40px;
        }

        .calendar-day:hover {
            background-color: var(--light);
        }

        .calendar-day.today {
            background-color: rgba(79, 70, 229, 0.1);
            color: var(--primary);
            font-weight: 600;
        }

        .calendar-day.has-event::after {
            content: '';
            position: absolute;
            bottom: 5px;
            width: 4px;
            height: 4px;
            background-color: var(--primary);
            border-radius: 50%;
        }

        /* Todo List */
        .todo-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            width: 100%;
        }

        .todo-item:last-child {
            border-bottom: none;
        }

        .todo-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: var(--primary);
            flex-shrink: 0;
        }

        .todo-text {
            flex: 1;
            font-size: 15px;
            min-width: 0;
            word-wrap: break-word;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: var(--text-light);
        }

        .todo-priority {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
            flex-shrink: 0;
        }

        .priority-high {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .priority-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .priority-low {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .todo-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .todo-action {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 14px;
        }

        /* Projects */
        .project-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 0;
            padding: 0;
        }

        .project-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.2s ease;
            width: 100%;
        }

        .project-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .project-title {
            font-weight: 600;
            font-size: 16px;
            flex: 1;
            min-width: 0;
            word-wrap: break-word;
        }

        .project-status {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .status-planning {
            background-color: rgba(79, 70, 229, 0.1);
            color: var(--primary);
        }

        .status-in-progress {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .status-completed {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .project-description {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 12px;
            word-wrap: break-word;
        }

        .project-progress {
            height: 6px;
            background-color: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .project-progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 3px;
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-light);
            align-items: center;
        }

        /* Notes */
        .notes-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 0;
            padding: 0;
        }

        .note-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.2s ease;
            width: 100%;
        }

        .note-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .note-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
            word-wrap: break-word;
        }

        .note-content {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 10px;
            max-height: 100px;
            overflow: hidden;
            text-overflow: ellipsis;
            word-wrap: break-word;
        }

        .note-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .note-tag {
            padding: 2px 8px;
            background-color: var(--light);
            border-radius: 4px;
            font-size: 12px;
            color: var(--text);
        }

        /* AI Assistant */
        .ai-assistant {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 100;
        }

        .ai-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            border: none;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .ai-toggle:hover {
            transform: scale(1.05);
            background-color: var(--primary-dark);
        }

        .ai-toggle.active {
            background-color: var(--secondary);
        }

        .ai-chat-container {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 380px;
            max-width: 90vw;
            height: 500px;
            max-height: 70vh;
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .ai-chat-container.active {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }

        .ai-chat-header {
            padding: 15px 20px;
            background-color: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .ai-chat-title {
            display: flex;
            align-items: center;
            font-weight: 600;
        }

        .ai-chat-title i {
            margin-right: 8px;
        }

        .ai-chat-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 18px;
        }

        .ai-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-height: 0;
        }

        .ai-chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .ai-chat-messages::-webkit-scrollbar-track {
            background: var(--light);
        }

        .ai-chat-messages::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .ai-message, .user-message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .ai-message {
            background-color: var(--light);
            color: var(--text);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .user-message {
            background-color: var(--primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 15px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--text-light);
            display: inline-block;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .ai-chat-input {
            padding: 15px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
            flex-shrink: 0;
        }

        .ai-chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 25px;
            font-size: 14px;
            min-width: 0;
        }

        .ai-chat-input button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }

        .ai-chat-input button:hover {
            background-color: var(--primary-dark);
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: var(--light);
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        .modal-header {
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .modal-description {
            color: var(--text-light);
            font-size: 15px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 15px;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.2s ease;
            min-width: 0;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            font-size: 15px;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--light);
            color: var(--text);
        }

        .btn-secondary:hover {
            background-color: var(--border);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #DC2626;
        }

        /* Add Form Modal */
        .add-form-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .add-form-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .add-form-content {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .add-form-modal.active .add-form-content {
            transform: translateY(0);
        }

        .add-form-content::-webkit-scrollbar {
            width: 8px;
        }

        .add-form-content::-webkit-scrollbar-track {
            background: var(--light);
        }

        .add-form-content::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        .add-form-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .add-form-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            cursor: pointer;
            color: var(--text-light);
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .add-form-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .add-form-tab-content {
            display: none;
        }

        .add-form-tab-content.active {
            display: block;
        }

        /* FAB Button */
        .fab {
            position: fixed;
            bottom: 25px;
            right: 100px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--secondary);
            color: white;
            border: none;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 90;
        }

        .fab:hover {
            transform: scale(1.05);
            background-color: #6D28D9;
        }

        /* AI Action Badge */
        .ai-action-badge {
            display: inline-block;
            padding: 2px 6px;
            background-color: var(--secondary);
            color: white;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 5px;
            flex-shrink: 0;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            padding: 6px 12px;
            background-color: var(--light);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .quick-action-btn:hover {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .widgets-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .calendar-widget {
                grid-column: span 2;
            }
        }

        @media (max-width: 768px) {
            :root {
                --sidebar-width: 0;
                --header-height: 60px;
            }

            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
                z-index: 100;
                transform: translateX(-100%);
                width: 280px;
                max-width: 80vw;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }

            .header {
                padding: 10px 15px;
            }

            .dashboard {
                padding: 15px;
                height: calc(100vh - var(--header-height));
                max-height: calc(100vh - var(--header-height));
            }

            .widgets-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .calendar-widget {
                grid-column: span 1;
                min-height: 350px;
            }

            .ai-chat-container {
                width: calc(100vw - 40px);
                right: -10px;
                max-width: none;
            }

            .fab {
                right: 85px;
            }

            .modal-content, .add-form-content {
                padding: 20px;
                margin: 10px;
            }

            .form-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .dashboard {
                padding: 10px;
            }

            .widget {
                padding: 15px;
            }

            .widget-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .search-bar {
                display: none;
            }

            .header-right {
                gap: 10px;
            }

            .ai-chat-container {
                height: 60vh;
                max-height: 60vh;
            }

            .fab {
                right: 70px;
                width: 48px;
                height: 48px;
                font-size: 20px;
            }

            .ai-toggle {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }
        }

        /* Print Styles */
        @media print {
            .sidebar, .header, .fab, .ai-assistant, .modal, .add-form-modal {
                display: none !important;
            }

            .main-content {
                height: auto;
                max-height: none;
            }

            .dashboard {
                height: auto;
                max-height: none;
                overflow: visible;
            }

            .widget {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--border);
            }
        }

        /* High DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .sidebar::-webkit-scrollbar-thumb,
            .dashboard::-webkit-scrollbar-thumb,
            .widget-content::-webkit-scrollbar-thumb,
            .ai-chat-messages::-webkit-scrollbar-thumb,
            .modal-content::-webkit-scrollbar-thumb,
            .add-form-content::-webkit-scrollbar-thumb {
                background: rgba(0, 0, 0, 0.2);
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #1F2937;
                --border: #374151;
                --text: #F9FAFB;
                --text-light: #D1D5DB;
            }

            body {
                background-color: #111827;
            }

            .widget, .modal-content, .add-form-content {
                background-color: #1F2937;
                color: var(--text);
            }

            .header {
                background-color: #1F2937;
            }

            .form-input {
                background-color: #374151;
                border-color: #4B5563;
                color: var(--text);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-rocket"></i>
                <h1>TechFest 2026</h1>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="dashboard">
                        <i class="fas fa-th-large"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="todos">
                        <i class="fas fa-check-circle"></i>
                        <span>Todo List</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="projects">
                        <i class="fas fa-project-diagram"></i>
                        <span>Projects</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="calendar">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Calendar</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="notes">
                        <i class="fas fa-sticky-note"></i>
                        <span>Notes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search tasks, projects, notes...">
                    </div>
                </div>
                <div class="header-right">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge"></span>
                    </button>
                    <button class="user-btn">
                        <img src="https://picsum.photos/seed/user123/40/40.jpg" alt="User">
                        <span>Organizer</span>
                    </button>
                </div>
            </header>

            <!-- Dashboard -->
            <div class="dashboard" id="dashboard">
                <div class="dashboard-header">
                    <h2>Welcome back, Organizer!</h2>
                    <p>Here's what's happening with your TechFest 2026 planning today.</p>
                </div>

                <div class="widgets-container">
                    <!-- Calendar Widget -->
                    <div class="widget calendar-widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Calendar</span>
                            </div>
                            <button class="widget-action">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                        <div class="calendar-header">
                            <h3 id="currentMonth">July 2023</h3>
                            <div class="calendar-nav">
                                <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                                <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Todo List Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-tasks"></i>
                                <span>Today's Tasks</span>
                            </div>
                            <button class="widget-action" id="addTodoBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <ul class="todo-list" id="todoList">
                                <!-- Todo items will be added dynamically -->
                            </ul>
                        </div>
                    </div>

                    <!-- Projects Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-project-diagram"></i>
                                <span>Active Projects</span>
                            </div>
                            <button class="widget-action" id="addProjectBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="project-list" id="projectList">
                                <!-- Projects will be added dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Notes Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-sticky-note"></i>
                                <span>Recent Notes</span>
                            </div>
                            <button class="widget-action" id="addNoteBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="notes-list" id="notesList">
                                <!-- Notes will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Assistant -->
    <div class="ai-assistant">
        <button class="ai-toggle" id="aiToggle">
            <i class="fas fa-robot"></i>
        </button>
        <div class="ai-chat-container" id="aiChatContainer">
            <div class="ai-chat-header">
                <div class="ai-chat-title">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </div>
                <button class="ai-chat-close" id="aiChatClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ai-chat-messages" id="aiChatMessages">
                <!-- AI messages will be added dynamically -->
            </div>
            <div class="ai-chat-input">
                <input type="text" id="aiChatInput" placeholder="Ask me anything about your TechFest planning...">
                <button id="aiChatSend">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Add Task Button -->
    <button class="fab" id="fabButton">
        <i class="fas fa-plus"></i>
    </button>

    <!-- API Key Modal -->
    <div class="modal" id="apiKeyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Welcome to TechFest 2026 Organizer</h3>
                <p class="modal-description">To use the AI assistant features, please enter your Gemini API key below.</p>
            </div>
            <div class="form-group">
                <label class="form-label" for="apiKeyInput">Gemini API Key</label>
                <input type="password" class="form-input" id="apiKeyInput" placeholder="Enter your API key">
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" id="skipApiKey">Skip for Now</button>
                <button class="btn btn-primary" id="saveApiKey">Save Key</button>
            </div>
        </div>
    </div>

    <!-- Add Form Modal -->
    <div class="add-form-modal" id="addFormModal">
        <div class="add-form-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Item</h3>
            </div>
            <div class="add-form-tabs">
                <button class="add-form-tab active" data-tab="todo">Task</button>
                <button class="add-form-tab" data-tab="project">Project</button>
                <button class="add-form-tab" data-tab="note">Note</button>
                <button class="add-form-tab" data-tab="event">Event</button>
            </div>
            
            <!-- Todo Form -->
            <div class="add-form-tab-content active" id="todoForm">
                <div class="form-group">
                    <label class="form-label" for="todoTitle">Task Title</label>
                    <input type="text" class="form-input" id="todoTitle" placeholder="Enter task title">
                </div>
                <div class="form-group">
                    <label class="form-label" for="todoDescription">Description</label>
                    <input type="text" class="form-input" id="todoDescription" placeholder="Enter task description">
                </div>
                <div class="form-group">
                    <label class="form-label" for="todoPriority">Priority</label>
                    <select class="form-input" id="todoPriority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="todoDueDate">Due Date</label>
                    <input type="date" class="form-input" id="todoDueDate">
                </div>
            </div>
            
            <!-- Project Form -->
            <div class="add-form-tab-content" id="projectForm">
                <div class="form-group">
                    <label class="form-label" for="projectTitle">Project Title</label>
                    <input type="text" class="form-input" id="projectTitle" placeholder="Enter project title">
                </div>
                <div class="form-group">
                    <label class="form-label" for="projectDescription">Description</label>
                    <textarea class="form-input" id="projectDescription" rows="3" placeholder="Enter project description"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="projectStatus">Status</label>
                    <select class="form-input" id="projectStatus">
                        <option value="planning">Planning</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="projectProgress">Progress (%)</label>
                    <input type="number" class="form-input" id="projectProgress" min="0" max="100" value="0">
                </div>
            </div>
            
            <!-- Note Form -->
            <div class="add-form-tab-content" id="noteForm">
                <div class="form-group">
                    <label class="form-label" for="noteTitle">Note Title</label>
                    <input type="text" class="form-input" id="noteTitle" placeholder="Enter note title">
                </div>
                <div class="form-group">
                    <label class="form-label" for="noteContent">Content</label>
                    <textarea class="form-input" id="noteContent" rows="5" placeholder="Enter note content"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="noteTags">Tags (comma separated)</label>
                    <input type="text" class="form-input" id="noteTags" placeholder="Enter tags">
                </div>
            </div>
            
            <!-- Event Form -->
            <div class="add-form-tab-content" id="eventForm">
                <div class="form-group">
                    <label class="form-label" for="eventTitle">Event Title</label>
                    <input type="text" class="form-input" id="eventTitle" placeholder="Enter event title">
                </div>
                <div class="form-group">
                    <label class="form-label" for="eventDate">Date</label>
                    <input type="date" class="form-input" id="eventDate">
                </div>
                <div class="form-group">
                    <label class="form-label" for="eventTime">Time</label>
                    <input type="time" class="form-input" id="eventTime">
                </div>
                <div class="form-group">
                    <label class="form-label" for="eventLocation">Location</label>
                    <input type="text" class="form-input" id="eventLocation" placeholder="Enter event location">
                </div>
                <div class="form-group">
                    <label class="form-label" for="eventDescription">Description</label>
                    <textarea class="form-input" id="eventDescription" rows="3" placeholder="Enter event description"></textarea>
                </div>
            </div>
            
            <div class="form-actions">
                <button class="btn btn-secondary" id="cancelAdd">Cancel</button>
                <button class="btn btn-primary" id="saveAdd">Save</button>
            </div>
        </div>
    </div>

    <script>
        // App State
        const appState = {
            apiKey: localStorage.getItem('gemini_api_key') || '',
            currentPage: 'dashboard',
            todos: JSON.parse(localStorage.getItem('todos')) || [],
            projects: JSON.parse(localStorage.getItem('projects')) || [],
            notes: JSON.parse(localStorage.getItem('notes')) || [],
            events: JSON.parse(localStorage.getItem('events')) || [],
            currentDate: new Date(),
            aiChatHistory: []
        };

        // DOM Elements
        const elements = {
            sidebar: document.getElementById('sidebar'),
            menuToggle: document.getElementById('menuToggle'),
            dashboard: document.getElementById('dashboard'),
            todoList: document.getElementById('todoList'),
            projectList: document.getElementById('projectList'),
            notesList: document.getElementById('notesList'),
            calendarGrid: document.getElementById('calendarGrid'),
            currentMonth: document.getElementById('currentMonth'),
            prevMonth: document.getElementById('prevMonth'),
            nextMonth: document.getElementById('nextMonth'),
            aiToggle: document.getElementById('aiToggle'),
            aiChatContainer: document.getElementById('aiChatContainer'),
            aiChatClose: document.getElementById('aiChatClose'),
            aiChatMessages: document.getElementById('aiChatMessages'),
            aiChatInput: document.getElementById('aiChatInput'),
            aiChatSend: document.getElementById('aiChatSend'),
            fabButton: document.getElementById('fabButton'),
            apiKeyModal: document.getElementById('apiKeyModal'),
            apiKeyInput: document.getElementById('apiKeyInput'),
            saveApiKey: document.getElementById('saveApiKey'),
            skipApiKey: document.getElementById('skipApiKey'),
            addFormModal: document.getElementById('addFormModal'),
            cancelAdd: document.getElementById('cancelAdd'),
            saveAdd: document.getElementById('saveAdd'),
            addTodoBtn: document.getElementById('addTodoBtn'),
            addProjectBtn: document.getElementById('addProjectBtn'),
            addNoteBtn: document.getElementById('addNoteBtn')
        };

        // Initialize App
        function initApp() {
            // Check if API key exists
            if (!appState.apiKey) {
                elements.apiKeyModal.classList.add('active');
            } else {
                // Initialize AI assistant with welcome message
                setTimeout(() => {
                    addAIMessage("Hello! I'm your AI assistant for TechFest 2026 planning. I have full access to your data and can help you by:\n\n Adding, editing, and deleting tasks\n Managing projects and tracking progress\n Creating and organizing notes\n Scheduling events and checking conflicts\n Analyzing your planning and suggesting improvements\n\nI can automatically create todo items, break down projects into tasks, and organize your notes. Just tell me what you need!");
                }, 1000);
            }

            // Setup event listeners
            setupEventListeners();

            // Load data from localStorage
            loadTodos();
            loadProjects();
            loadNotes();
            loadEvents();

            // Render calendar
            renderCalendar();

            // Request notification permission
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }

            // Handle window resize
            handleResize();
            window.addEventListener('resize', handleResize);
        }

        // Handle window resize
        function handleResize() {
            // Adjust grid layout based on viewport
            const widgetsContainer = document.querySelector('.widgets-container');
            if (widgetsContainer) {
                const width = window.innerWidth;
                if (width <= 768) {
                    widgetsContainer.className = 'widgets-container single-column';
                } else if (width <= 1200) {
                    widgetsContainer.className = 'widgets-container two-columns';
                } else {
                    widgetsContainer.className = 'widgets-container';
                }
            }
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Menu toggle
            elements.menuToggle.addEventListener('click', () => {
                elements.sidebar.classList.toggle('active');
            });

            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    navigateToPage(page);
                });
            });

            // AI Assistant
            elements.aiToggle.addEventListener('click', () => {
                elements.aiToggle.classList.toggle('active');
                elements.aiChatContainer.classList.toggle('active');
            });

            elements.aiChatClose.addEventListener('click', () => {
                elements.aiToggle.classList.remove('active');
                elements.aiChatContainer.classList.remove('active');
            });

            elements.aiChatSend.addEventListener('click', sendAIMessage);
            elements.aiChatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendAIMessage();
                }
            });

            // API Key Modal
            elements.saveApiKey.addEventListener('click', () => {
                const apiKey = elements.apiKeyInput.value.trim();
                if (apiKey) {
                    appState.apiKey = apiKey;
                    localStorage.setItem('gemini_api_key', apiKey);
                    elements.apiKeyModal.classList.remove('active');
                    addAIMessage("API key saved successfully! I now have full access to help you with your TechFest 2026 planning. Try asking me to create a todo list or analyze your current projects!");
                }
            });

            elements.skipApiKey.addEventListener('click', () => {
                elements.apiKeyModal.classList.remove('active');
                addAIMessage("You've skipped adding an API key. I'll have limited functionality. You can add your API key later in the settings to unlock all features.");
            });

            // Add Form Modal
            elements.fabButton.addEventListener('click', () => {
                elements.addFormModal.classList.add('active');
            });

            elements.addTodoBtn.addEventListener('click', () => {
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=todo]').click();
            });

            elements.addProjectBtn.addEventListener('click', () => {
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=project]').click();
            });

            elements.addNoteBtn.addEventListener('click', () => {
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=note]').click();
            });

            elements.cancelAdd.addEventListener('click', () => {
                elements.addFormModal.classList.remove('active');
            });

            elements.saveAdd.addEventListener('click', saveNewItem);

            // Add Form Tabs
            document.querySelectorAll('.add-form-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    
                    // Update active tab
                    document.querySelectorAll('.add-form-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update active content
                    document.querySelectorAll('.add-form-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabName}Form`).classList.add('active');
                });
            });

            // Calendar Navigation
            elements.prevMonth.addEventListener('click', () => {
                appState.currentDate.setMonth(appState.currentDate.getMonth() - 1);
                renderCalendar();
            });

            elements.nextMonth.addEventListener('click', () => {
                appState.currentDate.setMonth(appState.currentDate.getMonth() + 1);
                renderCalendar();
            });
        }

        // Navigation
        function navigateToPage(page) {
            appState.currentPage = page;
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === page) {
                    link.classList.add('active');
                }
            });

            // Update page content based on selected page
            switch(page) {
                case 'dashboard':
                    showDashboard();
                    break;
                case 'todos':
                    showTodosPage();
                    break;
                case 'projects':
                    showProjectsPage();
                    break;
                case 'calendar':
                    showCalendarPage();
                    break;
                case 'notes':
                    showNotesPage();
                    break;
                case 'settings':
                    showSettingsPage();
                    break;
            }

            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                elements.sidebar.classList.remove('active');
            }
        }

        // Show Dashboard
        function showDashboard() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Welcome back, Organizer!</h2>
                    <p>Here's what's happening with your TechFest 2026 planning today.</p>
                </div>

                <div class="widgets-container">
                    <!-- Calendar Widget -->
                    <div class="widget calendar-widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Calendar</span>
                            </div>
                            <button class="widget-action">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                        <div class="calendar-header">
                            <h3 id="currentMonth">July 2023</h3>
                            <div class="calendar-nav">
                                <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                                <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Todo List Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-tasks"></i>
                                <span>Today's Tasks</span>
                            </div>
                            <button class="widget-action" id="addTodoBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <ul class="todo-list" id="todoList">
                                <!-- Todo items will be added dynamically -->
                            </ul>
                        </div>
                    </div>

                    <!-- Projects Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-project-diagram"></i>
                                <span>Active Projects</span>
                            </div>
                            <button class="widget-action" id="addProjectBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="project-list" id="projectList">
                                <!-- Projects will be added dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Notes Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-sticky-note"></i>
                                <span>Recent Notes</span>
                            </div>
                            <button class="widget-action" id="addNoteBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="notes-list" id="notesList">
                                <!-- Notes will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Re-bind elements after updating innerHTML
            rebindElements();
            
            // Re-attach event listeners
            attachEventListeners();
            
            // Re-render content
            loadTodos();
            loadProjects();
            loadNotes();
            renderCalendar();
            
            // Handle resize for responsive grid
            handleResize();
        }

        // Re-bind DOM elements after page navigation
        function rebindElements() {
            elements.currentMonth = document.getElementById('currentMonth');
            elements.prevMonth = document.getElementById('prevMonth');
            elements.nextMonth = document.getElementById('nextMonth');
            elements.calendarGrid = document.getElementById('calendarGrid');
            elements.todoList = document.getElementById('todoList');
            elements.projectList = document.getElementById('projectList');
            elements.notesList = document.getElementById('notesList');
            elements.addTodoBtn = document.getElementById('addTodoBtn');
            elements.addProjectBtn = document.getElementById('addProjectBtn');
            elements.addNoteBtn = document.getElementById('addNoteBtn');
        }

        // Re-attach event listeners after page navigation
        function attachEventListeners() {
            // Calendar navigation
            if (elements.prevMonth && elements.nextMonth) {
                elements.prevMonth.addEventListener('click', () => {
                    appState.currentDate.setMonth(appState.currentDate.getMonth() - 1);
                    renderCalendar();
                });

                elements.nextMonth.addEventListener('click', () => {
                    appState.currentDate.setMonth(appState.currentDate.getMonth() + 1);
                    renderCalendar();
                });
            }

            // Add buttons
            if (elements.addTodoBtn) {
                elements.addTodoBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=todo]').click();
                });
            }

            if (elements.addProjectBtn) {
                elements.addProjectBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=project]').click();
                });
            }

            if (elements.addNoteBtn) {
                elements.addNoteBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=note]').click();
                });
            }
        }

        // Show Todos Page
        function showTodosPage() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Todo List</h2>
                    <p>Manage all your tasks for TechFest 2026.</p>
                </div>
                <div class="widgets-container single-column">
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-tasks"></i>
                                <span>All Tasks</span>
                            </div>
                            <button class="widget-action" id="addTodoBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <ul class="todo-list" id="todoList">
                                <!-- Todo items will be added dynamically -->
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            // Re-bind todo list element
            elements.todoList = document.getElementById('todoList');
            elements.addTodoBtn = document.getElementById('addTodoBtn');
            
            // Re-attach event listeners
            if (elements.addTodoBtn) {
                elements.addTodoBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=todo]').click();
                });
            }
            
            loadTodos();
        }

        // Show Projects Page
        function showProjectsPage() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Projects</h2>
                    <p>Track all your TechFest 2026 projects.</p>
                </div>
                <div class="widgets-container single-column">
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-project-diagram"></i>
                                <span>All Projects</span>
                            </div>
                            <button class="widget-action" id="addProjectBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="project-list" id="projectList">
                                <!-- Projects will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Re-bind project list element
            elements.projectList = document.getElementById('projectList');
            elements.addProjectBtn = document.getElementById('addProjectBtn');
            
            // Re-attach event listeners
            if (elements.addProjectBtn) {
                elements.addProjectBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=project]').click();
                });
            }
            
            loadProjects();
        }

        // Show Calendar Page
        function showCalendarPage() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Calendar</h2>
                    <p>View and manage your TechFest 2026 schedule.</p>
                </div>
                <div class="widgets-container single-column">
                    <div class="widget calendar-widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Calendar</span>
                            </div>
                            <button class="widget-action" id="addEventBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="calendar-header">
                            <h3 id="currentMonth">July 2023</h3>
                            <div class="calendar-nav">
                                <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                                <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            `;

            // Re-bind calendar elements
            elements.currentMonth = document.getElementById('currentMonth');
            elements.prevMonth = document.getElementById('prevMonth');
            elements.nextMonth = document.getElementById('nextMonth');
            elements.calendarGrid = document.getElementById('calendarGrid');
            const addEventBtn = document.getElementById('addEventBtn');
            
            // Re-attach calendar event listeners
            elements.prevMonth.addEventListener('click', () => {
                appState.currentDate.setMonth(appState.currentDate.getMonth() - 1);
                renderCalendar();
            });

            elements.nextMonth.addEventListener('click', () => {
                appState.currentDate.setMonth(appState.currentDate.getMonth() + 1);
                renderCalendar();
            });

            if (addEventBtn) {
                addEventBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=event]').click();
                });
            }
            
            renderCalendar();
        }

        // Show Notes Page
        function showNotesPage() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Notes</h2>
                    <p>All your ideas and thoughts for TechFest 2026.</p>
                </div>
                <div class="widgets-container single-column">
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-sticky-note"></i>
                                <span>All Notes</span>
                            </div>
                            <button class="widget-action" id="addNoteBtn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="notes-list" id="notesList">
                                <!-- Notes will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Re-bind notes list element
            elements.notesList = document.getElementById('notesList');
            elements.addNoteBtn = document.getElementById('addNoteBtn');
            
            // Re-attach event listeners
            if (elements.addNoteBtn) {
                elements.addNoteBtn.addEventListener('click', () => {
                    elements.addFormModal.classList.add('active');
                    document.querySelector('[data-tab=note]').click();
                });
            }
            
            loadNotes();
        }

        // Show Settings Page
        function showSettingsPage() {
            elements.dashboard.innerHTML = `
                <div class="dashboard-header">
                    <h2>Settings</h2>
                    <p>Manage your TechFest 2026 organizer settings.</p>
                </div>
                <div class="widgets-container single-column">
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </div>
                        </div>
                        <div class="widget-content">
                            <div class="form-group">
                                <label class="form-label">Gemini API Key</label>
                                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                    <input type="password" class="form-input" id="settingsApiKey" value="${appState.apiKey ? '' : ''}" placeholder="Enter your API key" style="flex: 1; min-width: 200px;">
                                    <button class="btn btn-primary" id="updateApiKey">Update</button>
                                    <button class="btn btn-secondary" id="removeApiKey">Remove</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Data Management</label>
                                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                    <button class="btn btn-primary" id="exportData">Export Data</button>
                                    <button class="btn btn-secondary" id="importData">Import Data</button>
                                    <input type="file" id="importFile" style="display: none;" accept=".json">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notifications</label>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <input type="checkbox" id="enableNotifications" ${Notification.permission === 'granted' ? 'checked' : ''}>
                                    <label for="enableNotifications">Enable browser notifications</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Reset Data</label>
                                <button class="btn btn-danger" id="resetData">Reset All Data</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Settings event listeners
            document.getElementById('updateApiKey').addEventListener('click', () => {
                const apiKeyInput = document.getElementById('settingsApiKey');
                if (apiKeyInput.value && apiKeyInput.value !== '') {
                    appState.apiKey = apiKeyInput.value;
                    localStorage.setItem('gemini_api_key', apiKeyInput.value);
                    addAIMessage("API key updated successfully!");
                }
            });

            document.getElementById('removeApiKey').addEventListener('click', () => {
                appState.apiKey = '';
                localStorage.removeItem('gemini_api_key');
                document.getElementById('settingsApiKey').value = '';
                addAIMessage("API key removed. Some AI features will be limited.");
            });

            document.getElementById('exportData').addEventListener('click', exportData);
            
            document.getElementById('importData').addEventListener('click', () => {
                document.getElementById('importFile').click();
            });

            document.getElementById('importFile').addEventListener('change', importData);

            document.getElementById('enableNotifications').addEventListener('change', (e) => {
                if (e.target.checked && Notification.permission !== 'granted') {
                    Notification.requestPermission().then(permission => {
                        if (permission !== 'granted') {
                            e.target.checked = false;
                            alert('Notification permission denied.');
                        }
                    });
                }
            });

            document.getElementById('resetData').addEventListener('click', () => {
                if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                    localStorage.clear();
                    location.reload();
                }
            });
        }

        // Render Calendar
        function renderCalendar() {
            if (!elements.calendarGrid) return;
            
            const year = appState.currentDate.getFullYear();
            const month = appState.currentDate.getMonth();
            
            // Update month display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            elements.currentMonth.textContent = `${monthNames[month]} ${year}`;
            
            // Clear calendar
            elements.calendarGrid.innerHTML = '';
            
            // Add day headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                elements.calendarGrid.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                elements.calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of month
            const today = new Date();
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = i;
                
                // Check if today
                if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // Check if has events
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                const hasEvents = appState.events.some(event => event.date === dateStr);
                if (hasEvents) {
                    dayElement.classList.add('has-event');
                }
                
                // Add click event
                dayElement.addEventListener('click', () => {
                    showDayDetails(dateStr);
                });
                
                elements.calendarGrid.appendChild(dayElement);
            }
        }

        // Show Day Details
        function showDayDetails(dateStr) {
            const dayEvents = appState.events.filter(event => event.date === dateStr);
            const dayTodos = appState.todos.filter(todo => todo.dueDate === dateStr);
            
            let detailsHTML = `<h3>Events for ${dateStr}</h3>`;
            
            if (dayEvents.length > 0) {
                detailsHTML += '<ul>';
                dayEvents.forEach(event => {
                    detailsHTML += `<li>${event.time} - ${event.title} at ${event.location}</li>`;
                });
                detailsHTML += '</ul>';
            } else {
                detailsHTML += '<p>No events scheduled for this day.</p>';
            }
            
            if (dayTodos.length > 0) {
                detailsHTML += '<h3>Tasks due on this day</h3><ul>';
                dayTodos.forEach(todo => {
                    detailsHTML += `<li>${todo.title}</li>`;
                });
                detailsHTML += '</ul>';
            }
            
            // Show in a modal or update the UI
            alert(detailsHTML);
        }

        // Load Todos
        function loadTodos() {
            if (!elements.todoList) return;
            
            elements.todoList.innerHTML = '';
            
            if (appState.todos.length === 0) {
                elements.todoList.innerHTML = '<li class="todo-item">No tasks yet. Click the + button to add one.</li>';
                return;
            }
            
            appState.todos.forEach(todo => {
                const todoItem = document.createElement('li');
                todoItem.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                todoItem.innerHTML = `
                    <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''} data-id="${todo.id}">
                    <span class="todo-text">${todo.title}</span>
                    ${todo.createdByAI ? '<span class="ai-action-badge">AI</span>' : ''}
                    <span class="todo-priority priority-${todo.priority}">${todo.priority}</span>
                    <div class="todo-actions">
                        <button class="todo-action edit-todo" data-id="${todo.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="todo-action delete-todo" data-id="${todo.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                elements.todoList.appendChild(todoItem);
            });
            
            // Add event listeners to todo items
            document.querySelectorAll('.todo-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const id = e.target.dataset.id;
                    const completed = e.target.checked;
                    updateTodoStatus(id, completed);
                });
            });
            
            document.querySelectorAll('.edit-todo').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    editTodo(id);
                });
            });
            
            document.querySelectorAll('.delete-todo').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    deleteTodo(id);
                });
            });
        }

        // Load Projects
        function loadProjects() {
            if (!elements.projectList) return;
            
            elements.projectList.innerHTML = '';
            
            if (appState.projects.length === 0) {
                elements.projectList.innerHTML = '<p>No projects yet. Click the + button to add one.</p>';
                return;
            }
            
            appState.projects.forEach(project => {
                const projectCard = document.createElement('div');
                projectCard.className = 'project-card';
                projectCard.innerHTML = `
                    <div class="project-header">
                        <div class="project-title">${project.title}</div>
                        <div class="project-status status-${project.status.replace(' ', '-')}">${project.status}</div>
                    </div>
                    <div class="project-description">${project.description}</div>
                    <div class="project-progress">
                        <div class="project-progress-bar" style="width: ${project.progress}%"></div>
                    </div>
                    <div class="project-meta">
                        <span>Progress: ${project.progress}%</span>
                        <div class="todo-actions">
                            <button class="todo-action edit-project" data-id="${project.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="todo-action delete-project" data-id="${project.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                elements.projectList.appendChild(projectCard);
            });
            
            // Add event listeners to project actions
            document.querySelectorAll('.edit-project').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    editProject(id);
                });
            });
            
            document.querySelectorAll('.delete-project').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    deleteProject(id);
                });
            });
        }

        // Load Notes
        function loadNotes() {
            if (!elements.notesList) return;
            
            elements.notesList.innerHTML = '';
            
            if (appState.notes.length === 0) {
                elements.notesList.innerHTML = '<p>No notes yet. Click the + button to add one.</p>';
                return;
            }
            
            appState.notes.forEach(note => {
                const noteCard = document.createElement('div');
                noteCard.className = 'note-card';
                
                // Create tags HTML
                let tagsHTML = '';
                if (note.tags && note.tags.length > 0) {
                    tagsHTML = '<div class="note-tags">';
                    note.tags.forEach(tag => {
                        tagsHTML += `<span class="note-tag">${tag}</span>`;
                    });
                    tagsHTML += '</div>';
                }
                
                noteCard.innerHTML = `
                    <div class="note-title">${note.title}</div>
                    <div class="note-content">${note.content}</div>
                    ${note.createdByAI ? '<span class="ai-action-badge">AI Created</span>' : ''}
                    ${tagsHTML}
                    <div class="project-meta">
                        <span>${new Date(note.createdAt).toLocaleDateString()}</span>
                        <div class="todo-actions">
                            <button class="todo-action edit-note" data-id="${note.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="todo-action delete-note" data-id="${note.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                elements.notesList.appendChild(noteCard);
            });
            
            // Add event listeners to note actions
            document.querySelectorAll('.edit-note').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    editNote(id);
                });
            });
            
            document.querySelectorAll('.delete-note').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    deleteNote(id);
                });
            });
        }

        // Load Events
        function loadEvents() {
            // Events are loaded in the calendar rendering
        }

        // Save New Item
        function saveNewItem() {
            const activeTab = document.querySelector('.add-form-tab.active').dataset.tab;
            
            switch(activeTab) {
                case 'todo':
                    saveTodo();
                    break;
                case 'project':
                    saveProject();
                    break;
                case 'note':
                    saveNote();
                    break;
                case 'event':
                    saveEvent();
                    break;
            }
            
            elements.addFormModal.classList.remove('active');
        }

        // Save Todo
        function saveTodo() {
            const title = document.getElementById('todoTitle').value.trim();
            const description = document.getElementById('todoDescription').value.trim();
            const priority = document.getElementById('todoPriority').value;
            const dueDate = document.getElementById('todoDueDate').value;
            
            if (!title) return;
            
            const newTodo = {
                id: generateId(),
                title,
                description,
                priority,
                dueDate,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            appState.todos.push(newTodo);
            localStorage.setItem('todos', JSON.stringify(appState.todos));
            loadTodos();
            
            // Clear form
            document.getElementById('todoTitle').value = '';
            document.getElementById('todoDescription').value = '';
            document.getElementById('todoPriority').value = 'low';
            document.getElementById('todoDueDate').value = '';
            
            // Send to AI for analysis
            if (appState.apiKey) {
                analyzeNewTodo(newTodo);
            }
        }

        // Save Project
        function saveProject() {
            const title = document.getElementById('projectTitle').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const status = document.getElementById('projectStatus').value;
            const progress = parseInt(document.getElementById('projectProgress').value) || 0;
            
            if (!title) return;
            
            const newProject = {
                id: generateId(),
                title,
                description,
                status,
                progress,
                createdAt: new Date().toISOString()
            };
            
            appState.projects.push(newProject);
            localStorage.setItem('projects', JSON.stringify(appState.projects));
            loadProjects();
            
            // Clear form
            document.getElementById('projectTitle').value = '';
            document.getElementById('projectDescription').value = '';
            document.getElementById('projectStatus').value = 'planning';
            document.getElementById('projectProgress').value = '0';
            
            // Send to AI for analysis
            if (appState.apiKey) {
                analyzeNewProject(newProject);
            }
        }

        // Save Note
        function saveNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            const tagsInput = document.getElementById('noteTags').value.trim();
            const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()) : [];
            
            if (!title || !content) return;
            
            const newNote = {
                id: generateId(),
                title,
                content,
                tags,
                createdAt: new Date().toISOString()
            };
            
            appState.notes.push(newNote);
            localStorage.setItem('notes', JSON.stringify(appState.notes));
            loadNotes();
            
            // Clear form
            document.getElementById('noteTitle').value = '';
            document.getElementById('noteContent').value = '';
            document.getElementById('noteTags').value = '';
            
            // Send to AI for analysis
            if (appState.apiKey) {
                analyzeNewNote(newNote);
            }
        }

        // Save Event
        function saveEvent() {
            const title = document.getElementById('eventTitle').value.trim();
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const location = document.getElementById('eventLocation').value.trim();
            const description = document.getElementById('eventDescription').value.trim();
            
            if (!title || !date) return;
            
            const newEvent = {
                id: generateId(),
                title,
                date,
                time,
                location,
                description,
                createdAt: new Date().toISOString()
            };
            
            appState.events.push(newEvent);
            localStorage.setItem('events', JSON.stringify(appState.events));
            renderCalendar();
            
            // Clear form
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDate').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventLocation').value = '';
            document.getElementById('eventDescription').value = '';
            
            // Send to AI for analysis
            if (appState.apiKey) {
                analyzeNewEvent(newEvent);
            }
        }

        // Update Todo Status
        function updateTodoStatus(id, completed) {
            const todoIndex = appState.todos.findIndex(todo => todo.id === id);
            if (todoIndex !== -1) {
                appState.todos[todoIndex].completed = completed;
                localStorage.setItem('todos', JSON.stringify(appState.todos));
                
                // Send to AI for analysis
                if (appState.apiKey) {
                    analyzeTodoUpdate(appState.todos[todoIndex]);
                }
            }
        }

        // Delete Todo
        function deleteTodo(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                appState.todos = appState.todos.filter(todo => todo.id !== id);
                localStorage.setItem('todos', JSON.stringify(appState.todos));
                loadTodos();
            }
        }

        // Edit Todo
        function editTodo(id) {
            const todo = appState.todos.find(todo => todo.id === id);
            if (todo) {
                // Populate form with todo data
                document.getElementById('todoTitle').value = todo.title;
                document.getElementById('todoDescription').value = todo.description || '';
                document.getElementById('todoPriority').value = todo.priority;
                document.getElementById('todoDueDate').value = todo.dueDate || '';
                
                // Show form
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=todo]').click();
                
                // Change save button to update
                document.getElementById('saveAdd').textContent = 'Update';
                document.getElementById('saveAdd').onclick = () => {
                    updateTodo(id);
                    elements.addFormModal.classList.remove('active');
                    document.getElementById('saveAdd').textContent = 'Save';
                    document.getElementById('saveAdd').onclick = saveNewItem;
                };
            }
        }

        // Update Todo
        function updateTodo(id) {
            const title = document.getElementById('todoTitle').value.trim();
            const description = document.getElementById('todoDescription').value.trim();
            const priority = document.getElementById('todoPriority').value;
            const dueDate = document.getElementById('todoDueDate').value;
            
            if (!title) return;
            
            const todoIndex = appState.todos.findIndex(todo => todo.id === id);
            if (todoIndex !== -1) {
                appState.todos[todoIndex] = {
                    ...appState.todos[todoIndex],
                    title,
                    description,
                    priority,
                    dueDate
                };
                
                localStorage.setItem('todos', JSON.stringify(appState.todos));
                loadTodos();
                
                // Clear form
                document.getElementById('todoTitle').value = '';
                document.getElementById('todoDescription').value = '';
                document.getElementById('todoPriority').value = 'low';
                document.getElementById('todoDueDate').value = '';
            }
        }

        // Delete Project
        function deleteProject(id) {
            if (confirm('Are you sure you want to delete this project?')) {
                appState.projects = appState.projects.filter(project => project.id !== id);
                localStorage.setItem('projects', JSON.stringify(appState.projects));
                loadProjects();
            }
        }

        // Edit Project
        function editProject(id) {
            const project = appState.projects.find(project => project.id === id);
            if (project) {
                // Populate form with project data
                document.getElementById('projectTitle').value = project.title;
                document.getElementById('projectDescription').value = project.description || '';
                document.getElementById('projectStatus').value = project.status;
                document.getElementById('projectProgress').value = project.progress;
                
                // Show form
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=project]').click();
                
                // Change save button to update
                document.getElementById('saveAdd').textContent = 'Update';
                document.getElementById('saveAdd').onclick = () => {
                    updateProject(id);
                    elements.addFormModal.classList.remove('active');
                    document.getElementById('saveAdd').textContent = 'Save';
                    document.getElementById('saveAdd').onclick = saveNewItem;
                };
            }
        }

        // Update Project
        function updateProject(id) {
            const title = document.getElementById('projectTitle').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const status = document.getElementById('projectStatus').value;
            const progress = parseInt(document.getElementById('projectProgress').value) || 0;
            
            if (!title) return;
            
            const projectIndex = appState.projects.findIndex(project => project.id === id);
            if (projectIndex !== -1) {
                appState.projects[projectIndex] = {
                    ...appState.projects[projectIndex],
                    title,
                    description,
                    status,
                    progress
                };
                
                localStorage.setItem('projects', JSON.stringify(appState.projects));
                loadProjects();
                
                // Clear form
                document.getElementById('projectTitle').value = '';
                document.getElementById('projectDescription').value = '';
                document.getElementById('projectStatus').value = 'planning';
                document.getElementById('projectProgress').value = '0';
            }
        }

        // Delete Note
        function deleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                appState.notes = appState.notes.filter(note => note.id !== id);
                localStorage.setItem('notes', JSON.stringify(appState.notes));
                loadNotes();
            }
        }

        // Edit Note
        function editNote(id) {
            const note = appState.notes.find(note => note.id === id);
            if (note) {
                // Populate form with note data
                document.getElementById('noteTitle').value = note.title;
                document.getElementById('noteContent').value = note.content;
                document.getElementById('noteTags').value = note.tags ? note.tags.join(', ') : '';
                
                // Show form
                elements.addFormModal.classList.add('active');
                document.querySelector('[data-tab=note]').click();
                
                // Change save button to update
                document.getElementById('saveAdd').textContent = 'Update';
                document.getElementById('saveAdd').onclick = () => {
                    updateNote(id);
                    elements.addFormModal.classList.remove('active');
                    document.getElementById('saveAdd').textContent = 'Save';
                    document.getElementById('saveAdd').onclick = saveNewItem;
                };
            }
        }

        // Update Note
        function updateNote(id) {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            const tagsInput = document.getElementById('noteTags').value.trim();
            const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()) : [];
            
            if (!title || !content) return;
            
            const noteIndex = appState.notes.findIndex(note => note.id === id);
            if (noteIndex !== -1) {
                appState.notes[noteIndex] = {
                    ...appState.notes[noteIndex],
                    title,
                    content,
                    tags
                };
                
                localStorage.setItem('notes', JSON.stringify(appState.notes));
                loadNotes();
                
                // Clear form
                document.getElementById('noteTitle').value = '';
                document.getElementById('noteContent').value = '';
                document.getElementById('noteTags').value = '';
            }
        }

        // Export Data
        function exportData() {
            const data = {
                todos: appState.todos,
                projects: appState.projects,
                notes: appState.notes,
                events: appState.events
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `techfest-2026-data-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Import Data
        function importData(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    if (data.todos) {
                        appState.todos = data.todos;
                        localStorage.setItem('todos', JSON.stringify(appState.todos));
                    }
                    
                    if (data.projects) {
                        appState.projects = data.projects;
                        localStorage.setItem('projects', JSON.stringify(appState.projects));
                    }
                    
                    if (data.notes) {
                        appState.notes = data.notes;
                        localStorage.setItem('notes', JSON.stringify(appState.notes));
                    }
                    
                    if (data.events) {
                        appState.events = data.events;
                        localStorage.setItem('events', JSON.stringify(appState.events));
                    }
                    
                    // Reload current page
                    navigateToPage(appState.currentPage);
                    
                    alert('Data imported successfully!');
                } catch (error) {
                    alert('Error importing data. Please check the file format.');
                }
            };
            
            reader.readAsText(file);
        }

        // AI Assistant Functions
        function addAIMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'ai-message';
            messageElement.innerHTML = message.replace(/\n/g, '<br>');
            elements.aiChatMessages.appendChild(messageElement);
            elements.aiChatMessages.scrollTop = elements.aiChatMessages.scrollHeight;
        }

        function addUserMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'user-message';
            messageElement.textContent = message;
            elements.aiChatMessages.appendChild(messageElement);
            elements.aiChatMessages.scrollTop = elements.aiChatMessages.scrollHeight;
        }

        function sendAIMessage() {
            const message = elements.aiChatInput.value.trim();
            if (!message) return;
            
            addUserMessage(message);
            elements.aiChatInput.value = '';
            
            // Show typing indicator
            const typingElement = document.createElement('div');
            typingElement.className = 'ai-message typing-indicator';
            typingElement.innerHTML = '<span></span><span></span><span></span>';
            elements.aiChatMessages.appendChild(typingElement);
            elements.aiChatMessages.scrollTop = elements.aiChatMessages.scrollHeight;
            
            // Send to Gemini API
            if (appState.apiKey) {
                callGeminiAPI(message)
                    .then(response => {
                        // Remove typing indicator
                        elements.aiChatMessages.removeChild(typingElement);
                        
                        // Add AI response
                        addAIMessage(response);
                        
                        // Check if AI wants to perform any actions
                        processAIResponse(response);
                    })
                    .catch(error => {
                        // Remove typing indicator
                        elements.aiChatMessages.removeChild(typingElement);
                        
                        // Add error message
                        addAIMessage("Sorry, I encountered an error. Please try again later.");
                        console.error('Gemini API Error:', error);
                    });
            } else {
                // Remove typing indicator
                elements.aiChatMessages.removeChild(typingElement);
                
                // Add message about missing API key
                addAIMessage("I need your Gemini API key to provide intelligent responses. You can add it in settings.");
            }
        }

        async function callGeminiAPI(message) {
            // Prepare comprehensive context for the AI
            const context = `
                You are an advanced AI assistant for TechFest 2026 planning with FULL CONTROL over the user's data. You can:
                
                CURRENT DATA:
                - Todos: ${JSON.stringify(appState.todos)}
                - Projects: ${JSON.stringify(appState.projects)}
                - Notes: ${JSON.stringify(appState.notes)}
                - Events: ${JSON.stringify(appState.events)}
                
                Current date: ${new Date().toISOString()}
                
                CAPABILITIES:
                1. Add, edit, delete any todos, projects, notes, events
                2. Analyze data and provide intelligent suggestions
                3. Break down projects into actionable tasks
                4. Create comprehensive todo lists from notes
                5. Schedule events and check for conflicts
                6. Prioritize tasks based on deadlines and importance
                7. Generate project timelines and milestones
                
                ACTION FORMAT:
                To perform actions, use this format:
                [ACTION: type|data]
                
                Examples:
                [ACTION: add_todo|{"title": "Contact venue", "priority": "high", "dueDate": "2024-01-15"}]
                [ACTION: add_project|{"title": "Website Development", "description": "Create event website", "status": "planning"}]
                [ACTION: add_note|{"title": "Sponsor Ideas", "content": "Tech companies, local businesses", "tags": ["sponsors", "ideas"]}]
                [ACTION: add_event|{"title": "Planning Meeting", "date": "2024-01-10", "time": "14:00", "location": "Conference Room"}]
                [ACTION: delete_todo|{"id": "todo_id_here"}]
                [ACTION: update_project|{"id": "project_id", "progress": 50, "status": "in-progress"}]
                
                User message: ${message}
                
                Respond helpfully and use actions when appropriate to assist with their TechFest planning.
            `;
            
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${appState.apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-goog-api-key': appState.apiKey
                },
                body: JSON.stringify({
                    contents: [
                        {
                            parts: [
                                {
                                    text: context
                                }
                            ]
                        }
                    ]
                })
            });
            
            const data = await response.json();
            
            if (data.candidates && data.candidates.length > 0) {
                return data.candidates[0].content.parts[0].text;
            } else {
                throw new Error('Invalid response from Gemini API');
            }
        }

        function processAIResponse(response) {
            // Find all action patterns in the response
            const actionRegex = /\[ACTION: ([^\|]+)\|([^\]]+)\]/g;
            let match;
            
            while ((match = actionRegex.exec(response)) !== null) {
                const actionType = match[1].trim();
                const actionData = JSON.parse(match[2].trim());
                
                switch(actionType) {
                    case 'add_todo':
                        addTodoFromAI(actionData);
                        break;
                    case 'add_project':
                        addProjectFromAI(actionData);
                        break;
                    case 'add_note':
                        addNoteFromAI(actionData);
                        break;
                    case 'add_event':
                        addEventFromAI(actionData);
                        break;
                    case 'delete_todo':
                        deleteTodoFromAI(actionData);
                        break;
                    case 'delete_project':
                        deleteProjectFromAI(actionData);
                        break;
                    case 'delete_note':
                        deleteNoteFromAI(actionData);
                        break;
                    case 'delete_event':
                        deleteEventFromAI(actionData);
                        break;
                    case 'update_todo':
                        updateTodoFromAI(actionData);
                        break;
                    case 'update_project':
                        updateProjectFromAI(actionData);
                        break;
                    case 'update_note':
                        updateNoteFromAI(actionData);
                        break;
                    case 'update_event':
                        updateEventFromAI(actionData);
                        break;
                }
            }
        }

        function addTodoFromAI(data) {
            const newTodo = {
                id: generateId(),
                title: data.title,
                description: data.description || '',
                priority: data.priority || 'medium',
                dueDate: data.dueDate || '',
                completed: false,
                createdAt: new Date().toISOString(),
                createdByAI: true
            };
            
            appState.todos.push(newTodo);
            localStorage.setItem('todos', JSON.stringify(appState.todos));
            loadTodos();
            
            // Show notification
            if (Notification.permission === 'granted') {
                new Notification('AI Added Task', {
                    body: `New task: ${newTodo.title}`,
                    icon: 'https://cdn-icons-png.flaticon.com/512/2920/2920277.png'
                });
            }
        }

        function addProjectFromAI(data) {
            const newProject = {
                id: generateId(),
                title: data.title,
                description: data.description || '',
                status: data.status || 'planning',
                progress: data.progress || 0,
                createdAt: new Date().toISOString(),
                createdByAI: true
            };
            
            appState.projects.push(newProject);
            localStorage.setItem('projects', JSON.stringify(appState.projects));
            loadProjects();
            
            // Show notification
            if (Notification.permission === 'granted') {
                new Notification('AI Added Project', {
                    body: `New project: ${newProject.title}`,
                    icon: 'https://cdn-icons-png.flaticon.com/512/2920/2920277.png'
                });
            }
        }

        function addNoteFromAI(data) {
            const newNote = {
                id: generateId(),
                title: data.title,
                content: data.content,
                tags: data.tags || [],
                createdAt: new Date().toISOString(),
                createdByAI: true
            };
            
            appState.notes.push(newNote);
            localStorage.setItem('notes', JSON.stringify(appState.notes));
            loadNotes();
            
            // Show notification
            if (Notification.permission === 'granted') {
                new Notification('AI Added Note', {
                    body: `New note: ${newNote.title}`,
                    icon: 'https://cdn-icons-png.flaticon.com/512/2920/2920277.png'
                });
            }
        }

        function addEventFromAI(data) {
            const newEvent = {
                id: generateId(),
                title: data.title,
                date: data.date,
                time: data.time || '',
                location: data.location || '',
                description: data.description || '',
                createdAt: new Date().toISOString(),
                createdByAI: true
            };
            
            appState.events.push(newEvent);
            localStorage.setItem('events', JSON.stringify(appState.events));
            renderCalendar();
            
            // Show notification
            if (Notification.permission === 'granted') {
                new Notification('AI Added Event', {
                    body: `New event: ${newEvent.title} on ${newEvent.date}`,
                    icon: 'https://cdn-icons-png.flaticon.com/512/2920/2920277.png'
                });
            }
        }

        function deleteTodoFromAI(data) {
            appState.todos = appState.todos.filter(todo => todo.id !== data.id);
            localStorage.setItem('todos', JSON.stringify(appState.todos));
            loadTodos();
        }

        function deleteProjectFromAI(data) {
            appState.projects = appState.projects.filter(project => project.id !== data.id);
            localStorage.setItem('projects', JSON.stringify(appState.projects));
            loadProjects();
        }

        function deleteNoteFromAI(data) {
            appState.notes = appState.notes.filter(note => note.id !== data.id);
            localStorage.setItem('notes', JSON.stringify(appState.notes));
            loadNotes();
        }

        function deleteEventFromAI(data) {
            appState.events = appState.events.filter(event => event.id !== data.id);
            localStorage.setItem('events', JSON.stringify(appState.events));
            renderCalendar();
        }

        function updateTodoFromAI(data) {
            const todoIndex = appState.todos.findIndex(todo => todo.id === data.id);
            if (todoIndex !== -1) {
                appState.todos[todoIndex] = { ...appState.todos[todoIndex], ...data };
                localStorage.setItem('todos', JSON.stringify(appState.todos));
                loadTodos();
            }
        }

        function updateProjectFromAI(data) {
            const projectIndex = appState.projects.findIndex(project => project.id === data.id);
            if (projectIndex !== -1) {
                appState.projects[projectIndex] = { ...appState.projects[projectIndex], ...data };
                localStorage.setItem('projects', JSON.stringify(appState.projects));
                loadProjects();
            }
        }

        function updateNoteFromAI(data) {
            const noteIndex = appState.notes.findIndex(note => note.id === data.id);
            if (noteIndex !== -1) {
                appState.notes[noteIndex] = { ...appState.notes[noteIndex], ...data };
                localStorage.setItem('notes', JSON.stringify(appState.notes));
                loadNotes();
            }
        }

        function updateEventFromAI(data) {
            const eventIndex = appState.events.findIndex(event => event.id === data.id);
            if (eventIndex !== -1) {
                appState.events[eventIndex] = { ...appState.events[eventIndex], ...data };
                localStorage.setItem('events', JSON.stringify(appState.events));
                renderCalendar();
            }
        }

        function analyzeNewTodo(todo) {
            const message = `I've added a new task: "${todo.title}" with priority ${todo.priority}. Can you analyze this and suggest any related tasks or adjustments to my schedule?`;
            
            // Send to AI for analysis
            callGeminiAPI(message)
                .then(response => {
                    addAIMessage(response);
                    processAIResponse(response);
                })
                .catch(error => {
                    console.error('Error analyzing new todo:', error);
                });
        }

        function analyzeNewProject(project) {
            const message = `I've started a new project: "${project.title}" with status ${project.status}. Can you help me break this down into smaller tasks and suggest a timeline?`;
            
            // Send to AI for analysis
            callGeminiAPI(message)
                .then(response => {
                    addAIMessage(response);
                    processAIResponse(response);
                })
                .catch(error => {
                    console.error('Error analyzing new project:', error);
                });
        }

        function analyzeNewNote(note) {
            const message = `I've added a new note: "${note.title}". Can you analyze this content and suggest any actionable items or related projects?`;
            
            // Send to AI for analysis
            callGeminiAPI(message)
                .then(response => {
                    addAIMessage(response);
                    processAIResponse(response);
                })
                .catch(error => {
                    console.error('Error analyzing new note:', error);
                });
        }

        function analyzeNewEvent(event) {
            const message = `I've added a new event: "${event.title}" on ${event.date}. Can you check for any conflicts with my existing schedule and suggest preparations?`;
            
            // Send to AI for analysis
            callGeminiAPI(message)
                .then(response => {
                    addAIMessage(response);
                    processAIResponse(response);
                })
                .catch(error => {
                    console.error('Error analyzing new event:', error);
                });
        }

        function analyzeTodoUpdate(todo) {
            const message = `I've ${todo.completed ? 'completed' : 'reopened'} the task: "${todo.title}". Can you update my priorities or suggest next steps?`;
            
            // Send to AI for analysis
            callGeminiAPI(message)
                .then(response => {
                    addAIMessage(response);
                    processAIResponse(response);
                })
                .catch(error => {
                    console.error('Error analyzing todo update:', error);
                });
        }

        // Utility Functions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
